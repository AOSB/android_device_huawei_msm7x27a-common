From 22409f51bfea9640a8909b0f4e2a9b9cf838727c Mon Sep 17 00:00:00 2001
From: Daz Jones <yuki@thebronasium.com>
Date: Thu, 12 Dec 2013 09:35:50 +0000
Subject: [PATCH] legacy OMX: allow building ExtendedMediaDefs for mmparser
 only targets

Change-Id: I50052ee47dcd3272971b9822f73d47ebdbe08d5e
---
 media/libstagefright/Android.mk | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/media/libstagefright/Android.mk b/media/libstagefright/Android.mk
index c0455da..804bbb9 100644
--- a/media/libstagefright/Android.mk
+++ b/media/libstagefright/Android.mk
@@ -163,6 +163,10 @@ endif #TARGET_ENABLE_AV_ENHANCEMENTS
 
 ifeq ($(TARGET_QCOM_LEGACY_OMX),true)
     LOCAL_CFLAGS += -DQCOM_LEGACY_OMX
+    TARGET_QCOM_LEGACY_MMPARSER := true
+endif
+
+ifeq ($(TARGET_QCOM_LEGACY_MMPARSER),true)
     LOCAL_CFLAGS += -DQCOM_LEGACY_MMPARSER
     LOCAL_SRC_FILES += ExtendedMediaDefs.cpp
 endif
-- 
1.8.1.2

